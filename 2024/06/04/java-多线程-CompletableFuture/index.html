<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <!-- Website mata -->
<meta charset="UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />

<!-- Disable transformation -->
<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">

<!-- Website description -->

<meta name="description" content="java-多线程-CompletableFuture" />


<!-- Website keywords -->

<meta name="keywords" content="Java, YYF&#39;s Blog" />




<!-- Website rss -->

<link rel="alternate" href="/default" title="YYF's Blog" >


<!-- Website favicon -->

<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=3.0.0" />


<!-- Canonical, good for google search engine -->
<link rel="canonical" href="https://yyf1050886654.github.io/2024/06/04/java-多线程-CompletableFuture/" />

<!-- Fancybox styling -->

<link rel="stylesheet" type="text/css" href="/lib/fancybox/jquery.fancybox.css" />


<!-- MathJax (LaTeX) support -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({ tex2jax: { inlineMath: [['$','$'], ['\\(','\\)']] } });  
  </script>
<script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"></script>


<!-- Theme styling -->
<link rel="stylesheet" type="text/css" href="/css/style.css?v=3.0.0" />

<!-- Analytics and push -->



  



<!-- LeanCloud Counter -->


<script>
  window.config = {"leancloud":{"app_id":null,"app_key":null,"server_url":null,"cdn":null},"toc":true,"fancybox":true,"latex":true};
</script>
  
  <title>java-多线程-CompletableFuture - YYF&#39;s Blog</title>

<meta name="generator" content="Hexo 7.1.1"></head>

<body>
  <div class="scrollPercentage"></div>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/." class="logo">YYF&#39;s Blog</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>

<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    
    <a href="/">
      <li class="mobile-menu-item">
        
        
        首页              </li>
    </a>
    
    <a href="/archives/">
      <li class="mobile-menu-item">
        
        
        归档              </li>
    </a>
    
    <a href="/tags/">
      <li class="mobile-menu-item">
        
        
        标签              </li>
    </a>
    
    <a href="/categories/">
      <li class="mobile-menu-item">
        
        
        分类              </li>
    </a>
    
    <a href="/collect/">
      <li class="mobile-menu-item">
        
        
        收藏              </li>
    </a>
    
    <a href="/about/">
      <li class="mobile-menu-item">
        
        
        关于              </li>
    </a>
    
  </ul>
</nav>
  <div class="container" id="mobile-panel">
    <header id="header" class="header">
      <div class="logo-wrapper">  
  <a href="/." class="logo">YYF's Blog</a>  
</div>  
  
<nav class="site-navbar">  
    
    <ul id="menu" class="menu">  
        
        <li class="menu-item">  
          <a class="menu-item-link" href="/">  
              
              
              首页  
              
          </a>  
        </li>  
        
        <li class="menu-item">  
          <a class="menu-item-link" href="/archives/">  
              
              
              归档  
              
          </a>  
        </li>  
        
        <li class="menu-item">  
          <a class="menu-item-link" href="/tags/">  
              
              
              标签  
              
          </a>  
        </li>  
        
        <li class="menu-item">  
          <a class="menu-item-link" href="/categories/">  
              
              
              分类  
              
          </a>  
        </li>  
        
        <li class="menu-item">  
          <a class="menu-item-link" href="/collect/">  
              
              
              收藏  
              
          </a>  
        </li>  
        
        <li class="menu-item">  
          <a class="menu-item-link" href="/about/">  
              
              
              关于  
              
          </a>  
        </li>  
        
    </ul>  
    
</nav>  

    </header>
    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
  <header class="post-header">
    <h1 class="post-title">
      
      java-多线程-CompletableFuture
      
    </h1>

    <div class="post-meta">
      <span class="post-time">
        2024-06-04
      </span>
      
      
      
    </div>
  </header>

  
  <div class="post-toc" id="post-toc">
    <h2 class="post-toc-title">文章目录</h2>
    <div class="post-toc-content">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E5%BC%82%E6%AD%A5%E4%BB%BB%E5%8A%A1"><span class="toc-number">1.</span> <span class="toc-text">创建异步任务</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#supplyAsync"><span class="toc-number">1.1.</span> <span class="toc-text">supplyAsync</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#runAsync"><span class="toc-number">1.2.</span> <span class="toc-text">runAsync</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E7%BB%93%E6%9E%9C%E7%9A%84%E6%96%B9%E6%B3%95"><span class="toc-number">1.3.</span> <span class="toc-text">获取结果的方法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%82%E6%AD%A5%E5%9B%9E%E8%B0%83%E5%A4%84%E7%90%86"><span class="toc-number">2.</span> <span class="toc-text">异步回调处理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#thenApply%E5%92%8CthenApplyAsync"><span class="toc-number">2.1.</span> <span class="toc-text">thenApply和thenApplyAsync</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#thenAccept%E5%92%8CthenAcceptAsync"><span class="toc-number">2.2.</span> <span class="toc-text">thenAccept和thenAcceptAsync</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#thenRun%E5%92%8CthenRunAsync"><span class="toc-number">2.3.</span> <span class="toc-text">thenRun和thenRunAsync</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%9A%E4%BB%BB%E5%8A%A1"><span class="toc-number">3.</span> <span class="toc-text">多任务</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#thenCombine%E3%80%81thenAcceptBoth-%E5%92%8CrunAfterBoth"><span class="toc-number">3.1.</span> <span class="toc-text">thenCombine、thenAcceptBoth 和runAfterBoth</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#applyToEither%EF%BC%8CacceptEither%EF%BC%8CrunAfterEither"><span class="toc-number">3.2.</span> <span class="toc-text">applyToEither，acceptEither，runAfterEither</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#allOf-anyOf"><span class="toc-number">3.3.</span> <span class="toc-text">allOf &#x2F; anyOf</span></a></li></ol></li></ol>
    </div>
  </div>
  

  <div class="post-content">
    
    <blockquote>
<p>平时多线程都是用runnable，callable，FutureTask，线程池这类完成任务。而completableFuture可以完成异步任务的编排，更具有灵活性。</p>
</blockquote>
<h2 id="创建异步任务"><a href="#创建异步任务" class="headerlink" title="创建异步任务"></a>创建异步任务</h2><h3 id="supplyAsync"><a href="#supplyAsync" class="headerlink" title="supplyAsync"></a>supplyAsync</h3><p>两种方法，一种是用默认的线程池ForkJoinPool.commonPool()，另一种需要自己定义，推荐后者</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 带返回值异步请求，默认线程池</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> &lt;U&gt; CompletableFuture&lt;U&gt; <span class="title function_">supplyAsync</span><span class="params">(Supplier&lt;U&gt; supplier)</span>;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 带返回值的异步请求，可以自定义线程池</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> &lt;U&gt; CompletableFuture&lt;U&gt; <span class="title function_">supplyAsync</span><span class="params">(Supplier&lt;U&gt; supplier, Executor executor)</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>使用方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ExecutionException, InterruptedException, TimeoutException &#123;</span><br><span class="line">    <span class="type">ExecutorService</span> <span class="variable">myThreadPool</span> <span class="operator">=</span> Executors.newFixedThreadPool(<span class="number">4</span>);</span><br><span class="line">    <span class="comment">//这是有线程池的，这里lambda表达式也可以携程()-&gt;1，如果没有别的逻辑的话</span></span><br><span class="line">    CompletableFuture&lt;Integer&gt; test1 = CompletableFuture.supplyAsync(()-&gt;&#123;</span><br><span class="line">        System.out.println(Thread.currentThread().toString());</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;,myThreadPool);</span><br><span class="line">    <span class="comment">//默认方法</span></span><br><span class="line">    CompletableFuture&lt;Integer&gt; test2 = CompletableFuture.supplyAsync(()-&gt;&#123;</span><br><span class="line">        System.out.println(Thread.currentThread().toString());</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;);</span><br><span class="line">    System.out.println(test1.get(<span class="number">10</span>, TimeUnit.SECONDS));</span><br><span class="line">    myThreadPool.shutdown();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>结果：</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Thread[ForkJoinPool.commonPool-worker-25,5,main]</span><br><span class="line">1</span><br></pre></td></tr></table></figure>

<h3 id="runAsync"><a href="#runAsync" class="headerlink" title="runAsync"></a>runAsync</h3><p>与前面的supplyAsync相比，runAsync没有返回值，就相当于是runnable，前面那个是callable。同样也有两个方法，一个是用默认线程池，另一个自己定义</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ExecutionException, InterruptedException, TimeoutException &#123;</span><br><span class="line">        <span class="type">ExecutorService</span> <span class="variable">myThreadPool</span> <span class="operator">=</span> Executors.newFixedThreadPool(<span class="number">4</span>);</span><br><span class="line">        CompletableFuture&lt;Void&gt; test1 = CompletableFuture.runAsync(()-&gt;&#123;</span><br><span class="line">            System.out.println(Thread.currentThread());</span><br><span class="line">        &#125;);</span><br><span class="line">        System.out.println(test1.get());</span><br><span class="line">        myThreadPool.shutdown();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>结果(这是默认线程)：</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Thread[ForkJoinPool.commonPool-worker-25,5,main]</span><br><span class="line">null</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="获取结果的方法"><a href="#获取结果的方法" class="headerlink" title="获取结果的方法"></a>获取结果的方法</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 如果完成则返回结果，否则就抛出具体的异常</span></span><br><span class="line"><span class="keyword">public</span> T <span class="title function_">get</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException, ExecutionException </span><br><span class="line"> </span><br><span class="line"><span class="comment">// 最大时间等待返回结果，否则就抛出具体异常</span></span><br><span class="line"><span class="keyword">public</span> T <span class="title function_">get</span><span class="params">(<span class="type">long</span> timeout, TimeUnit unit)</span> <span class="keyword">throws</span> InterruptedException, ExecutionException, TimeoutException</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 完成时返回结果值，否则抛出unchecked异常。为了更好地符合通用函数形式的使用，如果完成此 CompletableFuture所涉及的计算引发异常，则此方法将引发unchecked异常并将底层异常作为其原因</span></span><br><span class="line"><span class="keyword">public</span> T <span class="title function_">join</span><span class="params">()</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">// 如果完成则返回结果值（或抛出任何遇到的异常），否则返回给定的 valueIfAbsent。</span></span><br><span class="line"><span class="keyword">public</span> T <span class="title function_">getNow</span><span class="params">(T valueIfAbsent)</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">// 如果任务没有完成，返回的值设置为给定值</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">complete</span><span class="params">(T value)</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">// 如果任务没有完成，就抛出给定异常</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">completeExceptionally</span><span class="params">(Throwable ex)</span> </span><br><span class="line">  </span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="异步回调处理"><a href="#异步回调处理" class="headerlink" title="异步回调处理"></a>异步回调处理</h2><blockquote>
<p>apply就是有参数有返回值，accept就是有参数没有返回值，run就是没有参数没有返回值。async都是可以有异步线程池的</p>
</blockquote>
<h3 id="thenApply和thenApplyAsync"><a href="#thenApply和thenApplyAsync" class="headerlink" title="thenApply和thenApplyAsync"></a>thenApply和thenApplyAsync</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ExecutionException, InterruptedException, TimeoutException &#123;</span><br><span class="line">    <span class="type">ExecutorService</span> <span class="variable">myThreadPool</span> <span class="operator">=</span> Executors.newFixedThreadPool(<span class="number">4</span>);</span><br><span class="line"></span><br><span class="line">    CompletableFuture&lt;Integer&gt; task1 = CompletableFuture.supplyAsync(()-&gt;&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;task1&quot;</span>+Thread.currentThread()+<span class="string">&quot;-&gt;&quot;</span>+<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;,myThreadPool);</span><br><span class="line"></span><br><span class="line">    CompletableFuture&lt;Integer&gt; task2 = task1.thenApply((result) -&gt; &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;task2&quot;</span>+Thread.currentThread() + <span class="string">&quot;-&gt;&quot;</span> + (<span class="number">1</span> + result));</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span> + result;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    CompletableFuture&lt;Integer&gt; task3 = task1.thenApplyAsync((result) -&gt; &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;task3&quot;</span>+Thread.currentThread() + <span class="string">&quot;-&gt;&quot;</span> + (<span class="number">1</span> + result));</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span> + result;</span><br><span class="line">    &#125;,myThreadPool);</span><br><span class="line"></span><br><span class="line">    System.out.println(task2.get());</span><br><span class="line"></span><br><span class="line">    System.out.println(task3.get());</span><br><span class="line"></span><br><span class="line">    myThreadPool.shutdown();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>结果：</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">task1Thread[pool-1-thread-1,5,main]-&gt;1</span><br><span class="line">task2Thread[pool-1-thread-1,5,main]-&gt;2</span><br><span class="line">task3Thread[pool-1-thread-2,5,main]-&gt;2</span><br><span class="line">2</span><br><span class="line">2</span><br></pre></td></tr></table></figure>

<p>这个结果挺有意思的，需要分析一下。首先是线程池里面提交的线程都是并发的，这里就体现了并发，task2和3先进行了标准输出再完成值的输出。说明并发乱序了。</p>
<p>还有就是thenApply用的是跟前一个任务相同的线程，而带参数的thenApplyAsync用的是不一样的。</p>
<p><strong>默认参数的supplyAsync和thenApply&#x2F;默认thenApplyAsync</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">CompletableFuture&lt;Integer&gt; task1 = CompletableFuture.supplyAsync(()-&gt;&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;task1&quot;</span>+Thread.currentThread()+<span class="string">&quot;-&gt;&quot;</span>+<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//这里用不加参数的thenApplyAsync也是一样的</span></span><br><span class="line">CompletableFuture&lt;Integer&gt; task2 = task1.thenApply((result) -&gt; &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;task2&quot;</span>+Thread.currentThread() + <span class="string">&quot;-&gt;&quot;</span> + (<span class="number">1</span> + result));</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span> + result;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">task1Thread[ForkJoinPool.commonPool-worker-25,5,main]-&gt;1</span><br><span class="line">task2Thread[ForkJoinPool.commonPool-worker-25,5,main]-&gt;2</span><br><span class="line">2</span><br></pre></td></tr></table></figure>

<p><strong>默认参数的supplyAsync和线程池thenApplyAsync</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">CompletableFuture&lt;Integer&gt; task1 = CompletableFuture.supplyAsync(()-&gt;&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;task1&quot;</span>+Thread.currentThread()+<span class="string">&quot;-&gt;&quot;</span>+<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">CompletableFuture&lt;Integer&gt; task2 = task1.thenApplyAsync((result) -&gt; &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;task2&quot;</span>+Thread.currentThread() + <span class="string">&quot;-&gt;&quot;</span> + (<span class="number">1</span> + result));</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span> + result;</span><br><span class="line">&#125;,myThreadPool);</span><br></pre></td></tr></table></figure>

<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">task1Thread[ForkJoinPool.commonPool-worker-25,5,main]-&gt;1</span><br><span class="line">task2Thread[pool-1-thread-1,5,main]-&gt;2</span><br><span class="line">2</span><br></pre></td></tr></table></figure>

<p><strong>线程池的supplyAsync和thenApply</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">CompletableFuture&lt;Integer&gt; task1 = CompletableFuture.supplyAsync(()-&gt;&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;task1&quot;</span>+Thread.currentThread()+<span class="string">&quot;-&gt;&quot;</span>+<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;,myThreadPool);</span><br><span class="line"></span><br><span class="line">CompletableFuture&lt;Integer&gt; task2 = task1.thenApply((result) -&gt; &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;task2&quot;</span>+Thread.currentThread() + <span class="string">&quot;-&gt;&quot;</span> + (<span class="number">1</span> + result));</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span> + result;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">task1Thread[pool-1-thread-1,5,main]-&gt;1</span><br><span class="line">task2Thread[pool-1-thread-1,5,main]-&gt;2</span><br><span class="line">2</span><br></pre></td></tr></table></figure>

<p><strong>线程池的supplyAsync和线程池thenApplyAsync</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">CompletableFuture&lt;Integer&gt; task1 = CompletableFuture.supplyAsync(()-&gt;&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;task1&quot;</span>+Thread.currentThread()+<span class="string">&quot;-&gt;&quot;</span>+<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;,myThreadPool);</span><br><span class="line"></span><br><span class="line">CompletableFuture&lt;Integer&gt; task2 = task1.thenApplyAsync((result) -&gt; &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;task2&quot;</span>+Thread.currentThread() + <span class="string">&quot;-&gt;&quot;</span> + (<span class="number">1</span> + result));</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span> + result;</span><br><span class="line">&#125;,myThreadPool);</span><br></pre></td></tr></table></figure>

<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">task1Thread[pool-1-thread-1,5,main]-&gt;1</span><br><span class="line">task2Thread[pool-1-thread-2,5,main]-&gt;2</span><br><span class="line">2</span><br></pre></td></tr></table></figure>

<p><strong>线程池supplyAsync和默认thenApplyAsync</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">CompletableFuture&lt;Integer&gt; task1 = CompletableFuture.supplyAsync(()-&gt;&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;task1&quot;</span>+Thread.currentThread()+<span class="string">&quot;-&gt;&quot;</span>+<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;,myThreadPool);</span><br><span class="line"></span><br><span class="line">CompletableFuture&lt;Integer&gt; task2 = task1.thenApplyAsync((result) -&gt; &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;task2&quot;</span>+Thread.currentThread() + <span class="string">&quot;-&gt;&quot;</span> + (<span class="number">1</span> + result));</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span> + result;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">task1Thread[pool-1-thread-1,5,main]-&gt;1</span><br><span class="line">task2Thread[ForkJoinPool.commonPool-worker-25,5,main]-&gt;2</span><br><span class="line">2</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>总结：</strong></p>
<p>thenApply无论如何都会与前一个任务用相同的线程，而thenApplyAsync是重新起一个线程完成，如果没有参数，那么就会使用默认的ForkJoinPool.commonPool()</p>
<p>在后面的有async都是这个逻辑</p>
</blockquote>
<h3 id="thenAccept和thenAcceptAsync"><a href="#thenAccept和thenAcceptAsync" class="headerlink" title="thenAccept和thenAcceptAsync"></a>thenAccept和thenAcceptAsync</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">CompletableFuture&lt;Integer&gt; task1 = CompletableFuture.supplyAsync(()-&gt;&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;task1&quot;</span>+Thread.currentThread()+<span class="string">&quot;-&gt;&quot;</span>+<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;,myThreadPool);</span><br><span class="line"></span><br><span class="line">CompletableFuture&lt;Void&gt; task2 = task1.thenAccept((result) -&gt; &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;task2&quot;</span> + Thread.currentThread() + <span class="string">&quot;-&gt;&quot;</span> + (<span class="number">1</span> + result));</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">CompletableFuture&lt;Void&gt; task3 = task1.thenAcceptAsync((result) -&gt; &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;task3&quot;</span> + Thread.currentThread() + <span class="string">&quot;-&gt;&quot;</span> + (<span class="number">1</span> + result));</span><br><span class="line">&#125;,myThreadPool);</span><br><span class="line">System.out.println(task2.get());</span><br></pre></td></tr></table></figure>

<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">task1Thread[pool-1-thread-1,5,main]-&gt;1</span><br><span class="line">task2Thread[pool-1-thread-1,5,main]-&gt;2</span><br><span class="line">task3Thread[pool-1-thread-2,5,main]-&gt;2</span><br><span class="line">null</span><br></pre></td></tr></table></figure>
<p>这个结果也是乱序了，而且async的与之前一致。不再赘述。</p>
<h3 id="thenRun和thenRunAsync"><a href="#thenRun和thenRunAsync" class="headerlink" title="thenRun和thenRunAsync"></a>thenRun和thenRunAsync</h3><p>无入参数无返回值，其他都一样</p>
<h2 id="多任务"><a href="#多任务" class="headerlink" title="多任务"></a>多任务</h2><h3 id="thenCombine、thenAcceptBoth-和runAfterBoth"><a href="#thenCombine、thenAcceptBoth-和runAfterBoth" class="headerlink" title="thenCombine、thenAcceptBoth 和runAfterBoth"></a>thenCombine、thenAcceptBoth 和runAfterBoth</h3><p>combine就是有参数有返回值，accept就是有参数没返回值，run就是无参数无返回值</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">CompletableFuture&lt;Integer&gt; task1 = CompletableFuture.supplyAsync(()-&gt;&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;task1&quot;</span>+Thread.currentThread()+<span class="string">&quot;-&gt;&quot;</span>+<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">CompletableFuture&lt;Integer&gt; task2 = CompletableFuture.supplyAsync(() -&gt; &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;task2&quot;</span> + Thread.currentThread() + <span class="string">&quot;-&gt;&quot;</span> + <span class="number">2</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">&#125;);</span><br><span class="line">CompletableFuture&lt;Integer&gt; task3 = task1.thenCombine(task2, (a, b) -&gt; &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;task3&quot;</span> + Thread.currentThread() + <span class="string">&quot;-&gt;&quot;</span> + (a + b));</span><br><span class="line">    <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">System.out.println(task3.get());</span><br></pre></td></tr></table></figure>
<p>按道理来说task3应该是跟task1一样的线程，有一次结果是一样的，不知道这里为什么是main</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">task1Thread[ForkJoinPool.commonPool-worker-25,5,main]-&gt;1</span><br><span class="line">task2Thread[ForkJoinPool.commonPool-worker-18,5,main]-&gt;2</span><br><span class="line">task3Thread[main,5,main]-&gt;3</span><br><span class="line">3</span><br></pre></td></tr></table></figure>

<p><strong>回答：为什么默认是主线程</strong></p>
<ol>
<li><p>主线程调用get方法：当主线程调用get方法时，如果task1和task2已经完成，组合任务task3会立即执行，而不需要切换到另一个线程。这样可以减少线程切换的开销，提高性能。</p>
</li>
<li><p>完成的线程：如果任务在某个线程中完成，且没有其他线程等待结果，那么回调任务可能在完成任务的线程中执行。这种行为由CompletableFuture的默认执行策略决定。</p>
</li>
</ol>
<p>使用thenCombineAsync可以显式指定在异步线程中执行回调任务，从而避免在主线程中执行组合任务。</p>
<blockquote>
<p>随后试了一下延长处理时间，发现还真是：</p>
<p>task1Thread[pool-1-thread-1,5,main]-&gt;1</p>
<p>task2Thread[pool-1-thread-2,5,main]-&gt;2</p>
<p>task3Thread[pool-1-thread-1,5,main]-&gt;3</p>
<p>3</p>
<p>说明确实是处理时间短，处理时间短会由于固定的策略直接main做，减少线程开销。所以需要async异步，显示给出</p>
</blockquote>
<h3 id="applyToEither，acceptEither，runAfterEither"><a href="#applyToEither，acceptEither，runAfterEither" class="headerlink" title="applyToEither，acceptEither，runAfterEither"></a>applyToEither，acceptEither，runAfterEither</h3><p>两个里面做完一个就可以了，其他都一样</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">CompletableFuture&lt;Integer&gt; task1 = CompletableFuture.supplyAsync(()-&gt;&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;task1&quot;</span>+Thread.currentThread()+<span class="string">&quot;-&gt;&quot;</span>+<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        Thread.sleep(<span class="number">100</span>);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;,myThreadPool);</span><br><span class="line"></span><br><span class="line">CompletableFuture&lt;Integer&gt; task2 = CompletableFuture.supplyAsync(() -&gt; &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;task2&quot;</span> + Thread.currentThread() + <span class="string">&quot;-&gt;&quot;</span> + <span class="number">2</span>);</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        Thread.sleep(<span class="number">10</span>);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">&#125;,myThreadPool);</span><br><span class="line">CompletableFuture&lt;Integer&gt; task3 = task1.applyToEither(task2,(first)-&gt;&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;task3&quot;</span> + Thread.currentThread() + <span class="string">&quot;-&gt;&quot;</span> + first);</span><br><span class="line">    <span class="keyword">return</span> first;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">System.out.println(task3.get());</span><br></pre></td></tr></table></figure>

<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">task1Thread[pool-1-thread-1,5,main]-&gt;1</span><br><span class="line">task2Thread[pool-1-thread-2,5,main]-&gt;2</span><br><span class="line">task3Thread[pool-1-thread-2,5,main]-&gt;2</span><br><span class="line">2</span><br></pre></td></tr></table></figure>

<h3 id="allOf-anyOf"><a href="#allOf-anyOf" class="headerlink" title="allOf &#x2F; anyOf"></a>allOf &#x2F; anyOf</h3><p>allOf：CompletableFuture是多个任务都执行完成后才会执行，只有有一个任务执行异常，则返回的CompletableFuture执行get方法时会抛出异常，如果都是正常执行，则get返回null。</p>
<p>anyOf ：CompletableFuture是多个任务只要有一个任务执行完成，则返回的CompletableFuture执行get方法时会抛出异常，如果都是正常执行，则get返回执行完成任务的结果。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">CompletableFuture&lt;Integer&gt; task1 = CompletableFuture.supplyAsync(()-&gt;&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;task1&quot;</span>+Thread.currentThread()+<span class="string">&quot;-&gt;&quot;</span>+<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        Thread.sleep(<span class="number">100</span>);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;,myThreadPool);</span><br><span class="line"></span><br><span class="line">CompletableFuture&lt;Integer&gt; task2 = CompletableFuture.supplyAsync(() -&gt; &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;task2&quot;</span> + Thread.currentThread() + <span class="string">&quot;-&gt;&quot;</span> + <span class="number">2</span>);</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        Thread.sleep(<span class="number">100</span>);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">&#125;,myThreadPool);</span><br><span class="line">CompletableFuture&lt;Integer&gt; task3 = CompletableFuture.supplyAsync(()-&gt;&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;task3&quot;</span> + Thread.currentThread() + <span class="string">&quot;-&gt;&quot;</span> + <span class="number">3</span>);</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        Thread.sleep(<span class="number">100</span>);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">3</span>;</span><br><span class="line">&#125;,myThreadPool);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">System.out.println(CompletableFuture.allOf(task1,task2,task3).get());</span><br></pre></td></tr></table></figure>

<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">task1Thread[pool-1-thread-1,5,main]-&gt;1</span><br><span class="line">task2Thread[pool-1-thread-2,5,main]-&gt;2</span><br><span class="line">task3Thread[pool-1-thread-3,5,main]-&gt;3</span><br><span class="line">null</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//下面这是task2有1/0的情况</span><br><span class="line">task1Thread[pool-1-thread-1,5,main]-&gt;1</span><br><span class="line">task2Thread[pool-1-thread-2,5,main]-&gt;2</span><br><span class="line">task3Thread[pool-1-thread-3,5,main]-&gt;3</span><br><span class="line">Exception in thread &quot;main&quot; java.util.concurrent.ExecutionException: java.lang.ArithmeticException: / by zero</span><br><span class="line">	at java.util.concurrent.CompletableFuture.reportGet(CompletableFuture.java:357)</span><br><span class="line">	at java.util.concurrent.CompletableFuture.get(CompletableFuture.java:1908)</span><br><span class="line">	at com.hmdp.service.impl.BlogServiceImpl.main(BlogServiceImpl.java:319)</span><br><span class="line">Caused by: java.lang.ArithmeticException: / by zero</span><br><span class="line">	at com.hmdp.service.impl.BlogServiceImpl.lambda$main$4(BlogServiceImpl.java:301)</span><br><span class="line">	at java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1604)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>anyof很简单就不演示了</p>
</blockquote>

    
  </div>

  
  <!-- Post Copyright -->

<div class="post-copyright">
  <p class="copyright-item">
    <span>原文作者: </span>
    <a href="https://yyf1050886654.github.io">Yifan Yang</a>
  </p>
  <p class="copyright-item">
    <span>原文链接: </span>
    <a href="https://yyf1050886654.github.io/2024/06/04/java-%E5%A4%9A%E7%BA%BF%E7%A8%8B-CompletableFuture/">https://yyf1050886654.github.io/2024/06/04/java-%E5%A4%9A%E7%BA%BF%E7%A8%8B-CompletableFuture/</a>
  </p>
  <p class="copyright-item">
    <span>许可协议: </span>
    
    <a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/" target="_blank">知识共享署名-非商业性使用 4.0 国际许可协议</a>
  </p>
</div>

    

  

  
  <footer class="post-footer">
    
    <div class="post-tags">
      
      <a href="/tags/Java/">Java</a>
      
    </div>
    
      
  <nav class="post-nav">  
      
      <a class="prev" href="/2024/06/07/redis%E9%A1%B9%E7%9B%AE-kafkaStream%E6%94%B9%E9%80%A0/">  
        <i class="iconfont icon-left"></i>  
        <span class="prev-text nav-default">redis项目-kafkaStream改造</span>  
        <span class="prev-text nav-mobile">上一篇</span>  
      </a>  
      
      
      <a class="next" href="/2024/06/01/redis%E9%A1%B9%E7%9B%AE-%E7%BC%93%E5%AD%98%E5%92%8C%E8%AF%BB%E5%86%99%E4%B8%80%E8%87%B4%E6%80%A7/">  
        <span class="next-text nav-default">redis项目-缓存和读写一致性</span>  
        <span class="prev-text nav-mobile">下一篇</span>  
        <i class="iconfont icon-right"></i>  
      </a>  
      
  </nav>  
  

  </footer>
  

</article>
        </div>
          
  <div class="comments" id="comments">  
      
  </div>  
  

      </div>
    </main>
    <footer id="footer" class="footer">
      <!-- Social Links -->

<div class="social-links">
  
  
  
  
  <a href="mailto:1050886654@qq.com" class="iconfont icon-email" title="email"></a>
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <a target="_blank" rel="noopener" href="https://github.com/yyf1050886654" class="iconfont icon-github" title="github"></a>
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  

  
  
  <a href="/atom.xml" class="iconfont icon-rss" title="rss"></a>
  
</div>



<div class="copyright">
  <span class="power-by">
    由 <a class="hexo-link" target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a> 强力驱动
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    主题 -
    <a class="theme-link" target="_blank" rel="noopener" href="https://github.com/zeed-w-beez/hexo-theme-even">Even</a>
  </span>
  <span class="division">|</span>
  <span class="hosting-info">
    footer.hosting
  </span>

  <span class="copyright-year">
    <span>
      
      &copy;
      
      2024 - 2025      
    </span>

    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>

    <span class="author">Yifan Yang</span>
  </span>

</div>
    </footer>
    <div class="back-to-top" id="back-to-top"> <i class="iconfont icon-up"></i> </div>
  </div>
    
    
    
    
    
    
    
  

  







<script type="text/javascript" src="/lib/jquery"></script>



<script type="text/javascript" src="/lib/slideout"></script>



<script type="text/javascript" src="/lib/fancybox"></script>



  <script type="text/javascript" src="/js/src/even.js?v=3.0.0"></script>
</body>

</html>